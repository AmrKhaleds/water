@extends('Dashboard.layouts.app')@section('title')    @lang('back.bill_show')  #{{$bill->bill_num}}@endsection@section('content')    <style>        table, th, td {            border: 1px solid black;        }        .table td {            padding: 4px;        }        th {            background-color: #2a3035;            color: white;        }        th, p {            padding: 2%;        }        table {            width: 100%;            padding: 1%;        }    </style>    <!-- Content wrapper start -->    <div class="content-wrapper">        <!-- Row start -->        <div class="row gutters">            <!-- Row start -->            <div class="row gutters">                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">                    <div class="custom-actions-btns mb-5">                        <a href="#" onclick="printDiv('printable')" class="btn btn-dark no-print">                            <i class="icon-printer"></i> @lang('back.print')                        </a>                    </div>                </div>            </div>            <!-- Row end -->            <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12" id="printable">                <div class="card">                    <div class="card-body p-0">                        <div class="invoice-container">                            <div class="invoice-header">                                <!-- Row start -->                                <div class="row gutters">                                    <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4">                                    </div>                                    <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4">                                        <h3 class="text-center">@lang('back.tax_bill')</h3>                                        <h3 class="text-center">@lang('fixed.tax_bill')</h3>                                    </div>                                    <div class="col-xl-4 col-lg-4 col-md-4 col-sm-4">                                    </div>                                </div>                                <!-- Row end -->                                <br>                                <!-- Row start -->                                <div class="row gutters">                                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-6">                                    </div>                                    <div class="col-lg-6 col-md-6 col-sm-6">                                        <br>                                        <table class="table table-bordered">                                            {{--                                        <table class="">--}}                                            <tbody>                                            <tr>                                                <td class="text-left">@lang('back.bill_num')</td>                                                <td class="text-left">{{$bill->bill_num}}</td>                                                <td class="text-right">{{$bill->bill_num}}</td>                                                <td class="text-right">@lang('fixed.bill_num')</td>                                            </tr>                                            <tbody>                                        </table>                                        <br>                                        <table class="table table-bordered">                                            {{--                                        <table class="">--}}                                            <tbody>                                            <tr>                                                <td class="text-left">@lang('back.invoice_date')</td>                                                <td class="text-left">{{$bill->created_at->toDateString() }}</td>                                                <td class="text-right">{{$bill->created_at->toDateString() }}</td>                                                <td class="text-right">@lang('fixed.invoice_date')</td>                                            </tr>                                            <tr>                                                <td class="text-left">@lang('back.supply_of_d')</td>                                                <td class="text-left">{{$bill->created_at->toDateString()}}</td>                                                <td class="text-right">{{$bill->created_at->toDateString()}}</td>                                                <td class="text-right">@lang('fixed.supply_of_d')</td>                                            </tr>                                            <tbody>                                        </table>                                    </div>                                    {{--<div class="col-lg-6 col-md-6 col-sm-6">                                        <address class="text-right">                                            <h4>@lang('back.client_data')</h4>                                            {{$bill->client->name}}.<br/>                                            {{$bill->client->email}}.<br/>                                            {{$bill->client->client->phone}}.<br/>                                            {{$bill->client->client->address}}.<br/>                                        </address>                                    </div>--}}                                </div>                                <!-- Row end -->                                <div class="invoice-body">                                    <!-- Row start -->                                    <div class="row gutters">                                        <div class="col-lg-6 col-md-6 col-sm-6">                                            <div class="table-responsive">                                                <table class="table table-bordered">                                                    {{--                                            <table class="">--}}                                                    <thead>                                                    <tr>                                                        <th class="text-left" colspan="2"> @lang('back.client') </th>                                                        <th class="text-right" colspan="2">@lang('fixed.client') </th>                                                    </tr>                                                    </thead>                                                    <tbody>                                                    <tr>                                                        <td class="text-left">@lang('back.name')</td>                                                        <td class="text-left">{{translate($bill->client->name)}}</td>                                                        <td class="text-right">{{$bill->client->name}}</td>                                                        <td class="text-right">@lang('fixed.name')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.building_num')</td>                                                        <td class="text-left">{{$bill->id}}</td>                                                        <td class="text-right">{{$bill->id}}</td>                                                        <td class="text-right">@lang('fixed.building_num')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.street_name')</td>                                                        <td class="text-left">{{translate($bill->client->client->address)}}</td>                                                        <td class="text-right">{{$bill->client->client->address}}</td>                                                        <td class="text-right">@lang('fixed.street_name')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.district')</td>                                                        <td class="text-left">{{translate($bill->client->client->state)}}</td>                                                        <td class="text-right">{{$bill->client->client->state}}</td>                                                        <td class="text-right">@lang('fixed.district')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.city')</td>                                                        <td class="text-left">{{translate($bill->client->client->city)}}</td>                                                        <td class="text-right">{{$bill->client->client->city}}</td>                                                        <td class="text-right">@lang('fixed.city')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.country')</td>                                                        <td class="text-left">{{translate('Saudi Arabia')}}</td>                                                        <td class="text-right">Saudi Arabia</td>                                                        <td class="text-right">@lang('fixed.country')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.code_postal')</td>                                                        <td class="text-left">{{$bill->id}}</td>                                                        <td class="text-right">{{$bill->id}}</td>                                                        <td class="text-right">@lang('fixed.code_postal')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.additional_num')</td>                                                        <td class="text-left">-</td>                                                        <td class="text-right">-</td>                                                        <td class="text-right">@lang('fixed.additional_num')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.vat_num')</td>                                                        <td class="text-left">{{$bill->client->client->tax_number}}</td>                                                        <td class="text-right">{{$bill->client->client->tax_number}}</td>                                                        <td class="text-right">@lang('fixed.vat_num')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.buyer_other_id')</td>                                                        <td class="text-left">-</td>                                                        <td class="text-right">-</td>                                                        <td class="text-right">@lang('fixed.buyer_other_id')</td>                                                    </tr>                                                    </tbody>                                                </table>                                            </div>                                        </div>                                        <div class="col-lg-6 col-md-6 col-sm-6">                                            <div class="table-responsive">                                                <table class="table table-bordered">                                                    {{--                                            <table class="">--}}                                                    <thead>                                                    <tr>                                                        <th class="text-left" colspan="2"> @lang('back.seller') </th>                                                        <th class="text-right" colspan="2">@lang('fixed.seller') </th>                                                    </tr>                                                    </thead>                                                    <tbody>                                                    <tr>                                                        <td class="text-left">@lang('back.name')</td>                                                        <td class="text-left">{{translate(__('back.APPNAME'))}}</td>                                                        <td class="text-right">{{__('back.APPNAME')}}</td>                                                        <td class="text-right">@lang('fixed.name')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.building_num')</td>                                                        <td class="text-left">1</td>                                                        <td class="text-right">1</td>                                                        <td class="text-right">@lang('fixed.building_num')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.street_name')</td>                                                        <td class="text-left">{{translate($bill->user->branch->address)}}</td>                                                        <td class="text-right">{{$bill->user->branch->address}}</td>                                                        <td class="text-right">@lang('fixed.street_name')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.district')</td>                                                        <td class="text-left">{{$bill->id}}</td>                                                        <td class="text-right">{{$bill->id}}</td>                                                        <td class="text-right">@lang('fixed.district')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.city')</td>                                                        <td class="text-left">{{$bill->id}}</td>                                                        <td class="text-right">{{$bill->id}}</td>                                                        <td class="text-right">@lang('fixed.city')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.country')</td>                                                        <td class="text-left">{{$bill->id}}</td>                                                        <td class="text-right">{{$bill->id}}</td>                                                        <td class="text-right">@lang('fixed.country')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.code_postal')</td>                                                        <td class="text-left">{{$bill->id}}</td>                                                        <td class="text-right">{{$bill->id}}</td>                                                        <td class="text-right">@lang('fixed.code_postal')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.additional_num')</td>                                                        <td class="text-left">{{$bill->id}}</td>                                                        <td class="text-right">{{$bill->id}}</td>                                                        <td class="text-right">@lang('fixed.additional_num')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.vat_num')</td>                                                        <td class="text-left">{{translate($bill->user->branch->commercial_register)}}</td>                                                        <td class="text-right">{{translate($bill->user->branch->commercial_register)}}</td>                                                        <td class="text-right">@lang('fixed.vat_num')</td>                                                    </tr>                                                    <tr>                                                        <td class="text-left">@lang('back.buyer_other_id')</td>                                                        <td class="text-left">{{$bill->id}}</td>                                                        <td class="text-right">{{$bill->id}}</td>                                                        <td class="text-right">@lang('fixed.buyer_other_id')</td>                                                    </tr>                                                    </tbody>                                                </table>                                            </div>                                        </div>                                    </div>                                    <!-- Row end -->                                </div>                                <div class="invoice-body">                                    <!-- Row start -->                                    <div class="row gutters">                                        <div class="col-lg-12 col-md-12 col-sm-12">                                            <div class="table-responsive">                                                {{--                                            <table class="">--}}                                                <table class="table table-bordered">                                                    <thead>                                                    <tr class="vendorListHeading">                                                        <th class="text-center"> #</th>                                                        <th class="text-center">                                                            @lang('fixed.services')<br>                                                            @lang('back.services')                                                        </th>                                                        <th class="text-center">                                                            @lang('fixed.price')<br>                                                            @lang('back.price')                                                        </th>                                                        <th class="text-center">                                                            @lang('fixed.quantity')<br>                                                            @lang('back.quantity')                                                        </th>                                                        <th class="text-center">                                                            @lang('fixed.taxable_amount')<br>                                                            @lang('back.taxable_amount')                                                        </th>                                                        <th class="text-center">                                                            @lang('fixed.discount')<br>                                                            @lang('back.discount')                                                        </th>                                                        <th class="text-center">                                                            @lang('fixed.tax_rate')<br>                                                            @lang('back.tax_rate')                                                        </th>                                                        <th class="text-center">                                                            @lang('fixed.tax_amount')<br>                                                            @lang('back.tax_amount')                                                        </th>                                                        <th class="text-center">                                                            @lang('fixed.item_subtotal_including_vat')<br>                                                            @lang('back.item_subtotal_including_vat')                                                        </th>                                                    </tr>                                                    </thead>                                                    <tbody>                                                    @php                                                        $price = 0;                                                        $totaltax = 0;                                                        $discount = $bill->discount ? $bill->discount : 0;                                                    @endphp                                                    @foreach($bill->items as $key => $items)                                                        @php                                                            $price+=$items->price * $items->qty;                                                            $totaltax+=calculate_tax($bill->tax,$items->price * $items->qty);                                                        @endphp                                                        <tr>                                                            <td>{{$key+1}}</td>                                                            <td>{{$items->product}}</td>                                                            <td>{{$items->price}} @lang('back.SAR')</td>                                                            <td>{{$items->qty}}</td>                                                            <td>{{$items->price * $items->qty}} @lang('back.SAR')</td>                                                            <td>{{$items->discount ? $items->discount : 0}} @lang('back.SAR')</td>                                                            <td>{{$bill->tax}} %</td>                                                            <td>{{calculate_tax($bill->tax,$items->price * $items->qty)}}</td>                                                            <td>{{($items->price * $items->qty)  + calculate_tax($bill->tax,$items->price * $items->qty)}} @lang('back.SAR')</td>                                                        </tr>                                                    @endforeach                                                    <tr>                                                        <td class="text-left" colspan="5">@lang('back.grand_total')</td>                                                        <td class="text-right"                                                            colspan="4">@lang('fixed.grand_total')</td>                                                    </tr>                                                    <tr>                                                        <td colspan="3">                                                                {{$price}} @lang('back.SAR')                                                        </td>                                                        <td colspan="4">                                                                @lang('back.total_excluding_vat')                                                        </td>                                                        <td colspan="4">                                                                @lang('fixed.total_excluding_vat')                                                        </td>                                                    </tr>                                                    <tr>                                                        <td colspan="3">                                                            {{$discount}} @lang('back.SAR')                                                        </td>                                                        <td colspan="4">                                                            @lang('back.discount')                                                        </td>                                                        <td colspan="4">                                                            @lang('fixed.discount')                                                        </td>                                                    </tr>                                                    <tr>                                                        <td colspan="3">                                                            {{$price}} @lang('back.SAR')                                                        </td>                                                        <td colspan="4">                                                            @lang('back.taxable_amount')                                                        </td>                                                        <td colspan="4">                                                            @lang('fixed.taxable_amount')                                                        </td>                                                    </tr>                                                    <tr>                                                        <td colspan="3">                                                            {{$totaltax}} @lang('back.SAR')                                                        </td>                                                        <td colspan="4">                                                            @lang('back.total_vat')                                                        </td>                                                        <td colspan="4">                                                            @lang('fixed.total_vat')                                                        </td>                                                    </tr>                                                    <tr>                                                        <td colspan="3">                                                            {{($price + $totaltax) - $discount}} @lang('back.SAR')                                                        </td>                                                        <td colspan="4">                                                            @lang('back.grand_total')                                                        </td>                                                        <td colspan="4">                                                            @lang('fixed.grand_total')                                                        </td>                                                    </tr>                                                    </tbody>                                                </table>                                            </div>                                        </div>                                    </div>                                    <!-- Row end -->                                </div>                                <div class="invoice-footer">                                    @lang('back.thank_you_for_your_business').                                </div>                            </div>                        </div>                    </div>                </div>            </div>            <!-- Row end -->        </div>    </div>    <!-- Content wrapper end -->@endsection@section('js')    <script>        function printDiv(divName) {            var printContents = document.getElementById(divName).innerHTML;            var originalContents = document.body.innerHTML;                        document.body.innerHTML = printContents;            window.print();            document.body.innerHTML = originalContents;        }    </script>@endsection